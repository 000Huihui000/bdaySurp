<!DOCTYPE html>
<html>
<head>
    <!-- Keep ALL existing CSS styles unchanged -->
    <style>
        /* All previous CSS remains here */
    </style>
</head>
<body>
    <!-- Music Control -->
    <button class="music-btn" onclick="toggleMusic()">ðŸŽµ</button>

    <!-- Slides (now with proper structure) -->
    <div class="slide active" id="slide1">
        <!-- Slide 1 content -->
    </div>

    <div class="slide" id="slide2">
        <!-- Slide 2 content -->
    </div>

    <div class="slide" id="slide3">
        <!-- Slide 3 content -->
    </div>

    <div class="slide" id="slide4">
        <!-- Slide 4 content -->
    </div>

    <div class="slide" id="slide5">
        <!-- Slide 5 content -->
    </div>

    <!-- Background Music -->
    <audio id="bgMusic" loop>
        <source src="https://media.vocaroo.com/mp3/11UkIpEwjOZB" type="audio/mpeg">
    </audio>

    <script>
        // ===== FIXED CORE FUNCTIONALITY =====
        let currentSlide = 1; // MUST be declared FIRST

        // ===== MUSIC SETUP =====
        const bgMusic = document.getElementById('bgMusic');
        let musicStarted = false;

        document.addEventListener('click', initMusic, { once: true });

        function initMusic() {
            if (!musicStarted) {
                bgMusic.volume = 0.3;
                bgMusic.play().catch(() => {});
                musicStarted = true;
            }
        }

        function toggleMusic() {
            bgMusic[bgMusic.paused ? 'play' : 'pause']();
            document.querySelector('.music-btn').textContent = 
                bgMusic.paused ? 'ðŸ”‡' : 'ðŸŽµ';
        }

        // ===== PROPER SLIDE TRANSITIONS =====
        function nextSlide(event) {
            // Heart explosion animation
            const button = event.target;
            const rect = button.getBoundingClientRect();
            
            // Create 50 hearts
            for(let i = 0; i < 50; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = 'ðŸ’–';
                heart.style.left = `${rect.left + rect.width/2}px`;
                heart.style.top = `${rect.top + rect.height/2}px`;
                heart.style.setProperty('--tx', `${Math.random() * 400 - 200}%`);
                heart.style.setProperty('--ty', `${Math.random() * 400 - 200}%`);
                heart.style.fontSize = `${Math.random() * 32 + 16}px`;
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 1500);
            }

            // Proper slide transition
            const currentActive = document.querySelector('.active');
            currentActive.classList.remove('active');
            
            currentSlide++;
            const nextSlideElem = document.getElementById(`slide${currentSlide}`);
            nextSlideElem.classList.add('active');
            
            // Mobile-friendly scroll
            nextSlideElem.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
        }
    </script>
</body>
</html>
